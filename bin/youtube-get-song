#!/bin/sh

SHORTOPTS=":h"
LONGOPTS="help"
OPTS=$(getopt -o $SHORTOPTS --longoptions $LONGOPTS -n "$0" -- "$@")
eval set -- "$OPTS"

while [ $# -gt 0 ]; do
    case $1 in
        -h|--help)
            echo "Usage: "
            echo "Description"
            echo 
            #list of options following
            echo -e "-h \t print this message"
        	exit 0
        ;;
        --)
           shift
           break
        ;;

    esac
    shift
done

. /home/functions

if [ $1 = "--help" ]; then 
	echo "Usage: $0 url title"
	echo "title must be without extension"
	exit 0 
fi

url="$1"
title="$2" 
filename="${2}.mp4"

youtube-dl $1 --no-playlist -o "$filename" 

for format in mp4 mkv; do 
	if [ -f "${2}.$format" ]; then 
		mp42mp3 "${2}.$format"
		rm "${2}.$format"
	fi
done
